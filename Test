test
import { getExceptionCatalogue } from './your-file'; // Replace with the actual file name
import { exceptionApi } from './exceptionApi'; // Replace with the actual import path

jest.mock('./exceptionApi'); // Mock the exceptionApi module

describe('getExceptionCatalogue', () => {
  it('should fetch and return exception catalog data', async () => {
    // Mock data
    const mockResponse = { data: { success: true, items: [] } };
    const mockedExceptionApi = jest.fn().mockResolvedValue({
      get: jest.fn().mockResolvedValue(mockResponse),
    });
    (exceptionApi as jest.Mock).mockImplementation(mockedExceptionApi);

    // Test inputs
    const txPersona = 'testPersona';
    const stage = 'testStage';
    const pageNumber = 1;
    const pageSize = 10;
    const transactionReference = 'testTransaction';

    // Call the function
    const result = await getExceptionCatalogue(
      txPersona,
      stage,
      pageNumber,
      pageSize,
      transactionReference
    );

    // Assertions
    expect(exceptionApi).toHaveBeenCalledTimes(1);
    expect(mockedExceptionApi().get).toHaveBeenCalledWith(
      `exceptioncatalogue/${txPersona}/${stage}`,
      {
        params: {
          txbookinglocation: 'config-userBookingLocation', // Update if this is dynamic
          transactionreference: transactionReference,
          exceptionworkflowid: "'",
          pagenumber: pageNumber,
          pagesize: pageSize,
        },
      }
    );
    expect(result).toEqual(mockResponse.data);
  });

  it('should throw an error if the API call fails', async () => {
    const mockedExceptionApi = jest.fn().mockResolvedValue({
      get: jest.fn().mockRejectedValue(new Error('API Error')),
    });
    (exceptionApi as jest.Mock).mockImplementation(mockedExceptionApi);

    // Test inputs
    const txPersona = 'testPersona';
    const stage = 'testStage';
    const pageNumber = 1;
    const pageSize = 10;
    const transactionReference = 'testTransaction';

    // Call the function and expect it to throw
    await expect(
      getExceptionCatalogue(
        txPersona,
        stage,
        pageNumber,
        pageSize,
        transactionReference
      )
    ).rejects.toThrow('API Error');
  });
});




itsitstid

    config: {},
  };

  beforeEach(() => {
    mockGet.mockClear(); // Clear mock calls before each test
  });

  it('should call exceptionApi.get with the correct parameters', async () => {
    mockGet.mockResolvedValueOnce(mockAxiosResponse); // Simulate resolved response

    const response = await getExceptionCatalogue(
      txPersona,
      stage,
      pageNumber,
      pageSize,
      transactionReference
    );

    // Verify the response
    expect(response).toEqual(mockResponseData.data);

    // Verify the API call
    expect(mockGet).toHaveBeenCalledWith(
      `/exceptioncatalogue/${txPersona}/${stage}`,
      {
        params: {
          txbookinglocation: expect.any(String), // Mocked config.userBookingLocation
          transactionreference: transactionReference,
          exceptionworkflowid: '**',
          pagenumber: pageNumber,
          pagesize: pageSize,
        },
      }
    );
  });

  it('should handle API errors', async () => {
    mockGet.mockRejectedValueOnce(new Error('API Error')); // Simulate an error

    await expect(
      getExceptionCatalogue(txPersona, stage, pageNumber, pageSize, transactionReference)
    ).rejects.toThrow('API Error'); // Verify error is thrown
  });
});
